(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(960)}])},960:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var l=n(5893),o=n(8767),r=n(7294);let i=r.createContext({callback:()=>{},setCallback:e=>{}}),s=e=>{let{children:t}=e,[n,o]=(0,r.useState)(()=>{});return(0,l.jsx)(i.Provider,{value:{callback:n,setCallback:o},children:t})};var a=n(7632),c=n(8776);let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(t=>setTimeout(t,e))},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=(0,o.useQueryClient)();return{updateCache:function(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>{var t;return(0,c.Z)(e,"string"==typeof t?"AssertError: ".concat(t):t||"AssertError: condition must be truthy"),e};return n.setQueryData(e,o=>(d(t).then(()=>n.refetchQueries(e,{active:!0})),l(o)))}}};var h=n(4184),x=n.n(h),b=n(120);let v=(e,t)=>{let n=e;return n.defaultProps=t,n},g=e=>{let{isExpanded:t,color:n,zIndex:o,date:i,onColorChange:s,onZIndexChange:a,defaults:c}=e,d=(0,r.useRef)(),[u,h]=(0,r.useState)(null==c?void 0:c.focused);return(0,r.useEffect)(()=>{let e=e=>{let t=e.target;t.closest(".sticky-header-control")||t.closest(".sticky-header-button")||h(!1)};window.addEventListener("click",e);let t=e=>{"Escape"===e.key&&h(!1)};return window.addEventListener("keyup",t),()=>{window.removeEventListener("click",e),window.removeEventListener("keyup",t)}},[]),t?(0,l.jsxs)("div",{className:x()("bg-".concat(n)," px-2 py-2 block w-full relative overflow-visible sticky-header"),children:[(0,l.jsx)("div",{className:"inline-block w-1/2 text-xs",children:(0,l.jsx)("span",{className:"relative bottom-1",children:i?b.ou.fromJSDate(new Date(i)).toRelative():null})}),(0,l.jsxs)("div",{className:"inline-block w-1/2 text-right",children:[(0,l.jsx)("button",{className:"text-2xl text-gray-200 inline-block focus:outline px-4 relative sticky-header-button",onClick:()=>h(!0),children:(0,l.jsx)("span",{className:"relative bottom-2",children:"..."})}),u?(0,l.jsxs)("div",{className:x()("border-".concat(n),"absolute bg-gray-300 w-64 h-32 inline-block right-0 top-0 sticky-header-control border-2"),style:{top:"48px"},ref:d,children:[(0,l.jsxs)("div",{className:"block w-full py-2",children:[(0,l.jsx)("div",{className:"inline-block w-1/4 p-2",children:(0,l.jsx)("button",{className:"bg-blue p-2 w-8 h-8 border-transparent hover:border-gray-200 border-2",onClick:()=>s("blue"),children:"\xa0"})}),(0,l.jsx)("div",{className:"inline-block w-1/4 p-2",children:(0,l.jsx)("button",{className:"bg-yellow p-2 w-8 h-8 border-transparent hover:border-gray-200 border-2",onClick:()=>s("yellow"),children:"\xa0"})}),(0,l.jsx)("div",{className:"inline-block w-1/4 p-2",children:(0,l.jsx)("button",{className:"bg-lime p-2 w-8 h-8 border-transparent hover:border-gray-200 border-2",onClick:()=>s("lime"),children:"\xa0"})}),(0,l.jsx)("div",{className:"inline-block w-1/4 p-2",children:(0,l.jsx)("button",{className:"bg-green p-2 w-8 h-8 border-transparent hover:border-gray-200 border-2",onClick:()=>s("green"),children:"\xa0"})})]}),(0,l.jsxs)("div",{className:"text-white py-2",children:[(0,l.jsx)("div",{className:"block text-center text-xs",children:"z-position"}),(0,l.jsxs)("div",{className:"block w-full",children:[(0,l.jsx)("div",{className:"inline-block w-1/3 text-right",children:(0,l.jsx)("button",{onClick:()=>a(o-1),children:"⬅️"})}),(0,l.jsx)("div",{className:"inline-block w-1/3 text-center text-lg",children:o}),(0,l.jsx)("div",{className:"inline-block w-1/3 text-left",children:(0,l.jsx)("button",{onClick:()=>a(o+1),children:"➡️"})})]})]})]}):null]})]}):(0,l.jsx)("div",{className:x()("bg-".concat(n)," p-2 block w-full")})};v(g,{color:"blue",zIndex:1,defaults:{focused:!1}});let p=e=>{var t,n;let{note:o,className:i,onPositionChange:s,onResize:a,onChange:c,Header:d,...u}=e,[h,b]=(0,r.useState)(o.position||{top:0,left:0});(0,r.useEffect)(()=>{s(h)},[h]);let v=(null===(t=o.size)||void 0===t?void 0:t.width)||192,g=(null===(n=o.size)||void 0===n?void 0:n.height)||160,p=(0,r.useRef)();return(0,r.useEffect)(()=>{var e;null===(e=p.current)||void 0===e||e.focus()},[]),(0,l.jsxs)("div",{...u,className:x()(i,"bg-gray-100 inline-block p-0"),style:{top:h.top,left:h.left,zIndex:o.zIndex},onDragEnd:e=>{b({top:e.clientY-32,left:e.clientX-Math.floor(v/2-16)})},draggable:!0,children:[d?(0,l.jsx)(d,{}):null,(0,l.jsx)("textarea",{ref:p,className:"bg-gray-100 text-white text-lg p-4",style:{resize:"both",width:v,height:g-32},defaultValue:o.text,onBlur:e=>c(e.target.value),onMouseUp:e=>{let t=e.target;a({width:t.offsetWidth,height:t.offsetHeight+32})}})]})};p.defaultProps={note:{text:"",width:192,height:160,zIndex:1,position:{top:0,left:0},color:"yellow",size:{width:192,height:160}},Header:()=>(0,l.jsx)(g,{onColorChange:()=>{},onZIndexChange:()=>{}}),onPositionChange:()=>{}};var f=n(1991),w=n.n(f);let m=e=>{let{children:t,className:n,onDoubleClick:o,...s}=e,[a,c]=(0,r.useState)(!1),{callback:d}=(0,r.useContext)(i);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:w()("delete-region h-16 bg-red block w-full text-center text-2xl py-4 text-white fixed top-0 left-0 z-10 opacity-0",{"opacity-50":a}),onDragOver:e=>{c(!0),e.preventDefault()},onDragLeave:()=>{c(!1)},onDrop:()=>{"function"==typeof d&&d(),c(!1)},children:"Drop Note to Delete"}),(0,l.jsx)("div",{...s,className:w()(n,"bg-gray-200 block sticky-region cursor-pointer"),onDoubleClick:e=>{o({x:e.clientX,y:e.clientY})},children:t})]})},k=e=>{var t,n;let{getNotes:s,saveNotes:c}=e,[d,h]=(0,r.useState)(null),{data:x=[]}=(0,o.useQuery)(["notes"],s),{updateCache:b}=u(["notes"],100),{setCallback:v}=(0,r.useContext)(i),f=e=>{if(!e||!d)return;let t=[...x,{id:(0,a.Z)(),text:e,date:new Date,color:d.color,position:d.position,size:d.size,zIndex:1}];c(t),h(null),b(()=>t)},w=e=>{let t=x.map(t=>t.id===e.id?{...t,...e}:t);c(t),b(()=>t)},k=e=>{let t=x.filter(t=>t.id!==e.id);c(t),b(()=>t)};return(0,l.jsxs)(m,{className:"relative",onDoubleClick:e=>{let t={color:"blue",zIndex:1,position:{top:e.y-Math.floor(40),left:e.x-Math.floor(96)},size:{width:192,height:160}};h({...d||t,...t})},children:[(0,l.jsx)(l.Fragment,{children:d?(0,l.jsx)(p,{note:{...d,text:"",size:{width:192,height:160}},onChange:e=>f(e),Header:()=>(0,l.jsx)(g,{color:d.color,zIndex:d.zIndex,onColorChange:e=>h({...d||{},color:e}),onZIndexChange:e=>h({...d||{},zIndex:e}),isExpanded:!0}),onPositionChange:e=>h({...d||{},position:e}),onResize:e=>h({...d,size:e}),className:"absolute",onDragStart:()=>{v(()=>()=>{h(null)})}},"preview-".concat(null==d?void 0:null===(t=d.position)||void 0===t?void 0:t.left,"-").concat(null==d?void 0:null===(n=d.position)||void 0===n?void 0:n.top)):null}),x.map(e=>(0,l.jsx)(p,{className:"absolute",note:e,Header:()=>(0,l.jsx)(g,{color:e.color,zIndex:e.zIndex,date:e.date,onColorChange:t=>w({...e,color:t}),onZIndexChange:t=>w({...e,zIndex:t}),isExpanded:!0}),onPositionChange:t=>w({...e,position:t}),onResize:t=>w({...e,size:t}),onChange:t=>w({...e,text:t}),onDragStart:()=>{v(()=>()=>{confirm("Are you sure you want to delete this note?")&&k(e)})}},e.id))]})};function y(){let e=new o.QueryClient;return(0,l.jsx)(o.QueryClientProvider,{client:e,children:(0,l.jsx)(s,{children:(0,l.jsx)(k,{})})})}v(k,{getNotes:async()=>JSON.parse(localStorage.getItem("notes")||"[]"),saveNotes:async e=>localStorage.setItem("notes",JSON.stringify(e))})}},function(e){e.O(0,[313,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);